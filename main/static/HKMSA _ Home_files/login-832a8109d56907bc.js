(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{9339:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/accounts/login",function(){return r(7237)}])},7237:function(e,t,r){"use strict";r.r(t);var n=r(5893),s=r(1664),a=r(1163),i=r(7294),o=r(7536),c=r(471),l=r(9356),u=r(8091),d=r(2965);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){m(e,t,r[t])}))}return e}t.default=function(){var e=(0,a.useRouter)(),t=(0,o.cI)({defaultValues:{identifier:"",password:""},mode:"onSubmit",reValidateMode:"onSubmit"}),r=t.register,m=t.handleSubmit,p=t.formState.errors,x=(0,i.useState)(!1),h=x[0],w=x[1],y=(0,i.useState)(!1),b=y[0],j=y[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex justify-center my-20",children:(0,n.jsxs)("form",{className:"flex flex-col items-center",onSubmit:m((function(t){j(!1),w(!0);var r=t.identifier,n={password:t.password,username:"",email:""};(0,d.v)(r)?n.email=r:n.username=r,l.Z.auth.login(n).then((function(t){(0,u.ik)(t.token),setTimeout((function(){var t,r;window.location.assign((null===(t=e.query)||void 0===t?void 0:t.redirect)?"".concat("https://www.thehkmsa.com").concat(null===(r=e.query)||void 0===r?void 0:r.redirect):"".concat("https://www.thehkmsa.com","/profile"))}),500)})).catch((function(e){console.error(e),j(!0)})).finally((function(){return w(!1)}))})),children:[(0,n.jsx)("span",{className:"font-bold text-3xl text-black text-center",children:"Login"}),(0,n.jsxs)("div",{className:"mt-12 flex flex-col space-y-4",children:[(0,n.jsx)("input",f({className:"appearance-none sm:w-[32ch] w-[24ch] px-3 py-2 text-center border-2 border-gray-200 rounded text-xl focus:outline-primary",placeholder:"Username or Email"},r("identifier",{required:!0}))),(0,n.jsx)("input",f({className:"appearance-none sm:w-[32ch] w-[24ch] px-3 py-2 text-center border-2 border-gray-200 rounded text-xl focus:outline-primary",placeholder:"Password",type:"password"},r("password",{required:!0})))]}),p.identifier&&(0,n.jsx)("span",{className:"text-red-500 mt-5",children:"Fill in username or email please"}),p.password&&(0,n.jsx)("span",{className:"text-red-500 mt-5",children:"Fill in password please"}),b&&(0,n.jsx)("span",{className:"text-red-500 mt-5",children:"Invalid Credentials"}),(0,n.jsx)("button",{className:"mt-8 bg-primary text-white w-full py-2 text-lg text-center rounded font-bold uppercase flex justify-center",type:"submit",children:h?(0,n.jsx)(c.epG,{className:"animate-spin text-3xl"}):"Login"}),(0,n.jsxs)("span",{className:"mt-5 text-gray-500",children:["Not a member? Register"," ",(0,n.jsx)(s.default,{href:"/register",children:(0,n.jsx)("a",{className:"text-primary underline",children:"here"})})]}),(0,n.jsxs)("span",{className:"mt-2 text-gray-500",children:["Forgot Password? Reset"," ",(0,n.jsx)(s.default,{href:"/forgot-password",children:(0,n.jsx)("a",{className:"text-primary underline",children:"here"})})]})]})})})}},2965:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n=function(e){return/\S+@\S+\.\S+/.test(e)}}},function(e){e.O(0,[955,536,774,888,179],(function(){return t=9339,e(e.s=t);var t}));var t=e.O();_N_E=t}]);